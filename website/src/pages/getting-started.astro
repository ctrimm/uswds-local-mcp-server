---
import Layout from '../layouts/Layout.astro';
---

<Layout title="Getting Started - USWDS MCP Server">
  <div class="container">
    <h1>Getting Started</h1>
    <p class="lead">Start using the USWDS MCP Server in minutes</p>

    <!-- Local Setup -->
    <section class="section">
      <h2>Local Development</h2>
      <p>Run the MCP server on your local machine for development.</p>

      <h3>Prerequisites</h3>
      <ul>
        <li>Node.js 20 or higher (required by MCP SDK)</li>
        <li>npm or yarn package manager</li>
        <li>MCP-compatible client (Claude Desktop, Cursor, Cline, etc.)</li>
      </ul>

      <h3>Installation Methods</h3>

      <h4>Option 1: Install via NPM (Recommended)</h4>
      <p>Install globally for easy access:</p>
      <div class="code-block">
        <pre><code># Install globally
npm install -g uswds-local-mcp-server

# The command 'uswds-mcp' is now available
uswds-mcp --version</code></pre>
      </div>

      <h4>Option 2: Clone from GitHub</h4>
      <p>For development or customization:</p>
      <div class="code-block">
        <pre><code># Clone the repository
git clone https://github.com/ctrimm/uswds-local-mcp-server.git
cd uswds-local-mcp-server

# Install dependencies
npm install

# Build the project
npm run build</code></pre>
      </div>

      <h3>Configure MCP Client</h3>
      <p>Add the following configuration to your MCP client settings:</p>

      <h4>Claude Desktop</h4>
      <p>Edit <code>~/Library/Application Support/Claude/claude_desktop_config.json</code> (macOS) or <code>%APPDATA%/Claude/claude_desktop_config.json</code> (Windows):</p>

      <p><strong>If installed via NPM:</strong></p>
      <div class="code-block">
        <pre><code>{
  "mcpServers": {
    "uswds": {
      "command": "uswds-mcp",
      "env": {
        "USE_REACT_COMPONENTS": "true"
      }
    }
  }
}</code></pre>
      </div>

      <p><strong>If cloned from GitHub:</strong></p>
      <div class="code-block">
        <pre><code>{
  "mcpServers": {
    "uswds": {
      "command": "node",
      "args": ["/absolute/path/to/uswds-local-mcp-server/dist/index.js"],
      "env": {
        "USE_REACT_COMPONENTS": "true"
      }
    }
  }
}</code></pre>
      </div>

      <h4>Cursor / Cline</h4>

      <p><strong>If installed via NPM:</strong></p>
      <div class="code-block">
        <pre><code>{
  "mcpServers": {
    "uswds": {
      "command": "uswds-mcp",
      "env": {
        "USE_REACT_COMPONENTS": "true"
      }
    }
  }
}</code></pre>
      </div>

      <p><strong>If cloned from GitHub:</strong></p>
      <div class="code-block">
        <pre><code>{
  "mcpServers": {
    "uswds": {
      "command": "node",
      "args": ["/absolute/path/to/uswds-local-mcp-server/dist/index.js"],
      "env": {
        "USE_REACT_COMPONENTS": "true"
      }
    }
  }
}</code></pre>
      </div>

      <h3>Environment Variables</h3>
      <table>
        <thead>
          <tr>
            <th>Variable</th>
            <th>Default</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>USE_REACT_COMPONENTS</code></td>
            <td><code>false</code></td>
            <td>Use React-USWDS components instead of vanilla USWDS</td>
          </tr>
          <tr>
            <td><code>LOG_LEVEL</code></td>
            <td><code>info</code></td>
            <td>Logging level (debug, info, warn, error)</td>
          </tr>
        </tbody>
      </table>
    </section>

    <!-- Remote Deployment -->
    <section class="section">
      <h2>Remote Deployment (AWS Lambda)</h2>
      <p>Deploy the MCP server to AWS Lambda for serverless, always-available access.</p>

      <h3>Prerequisites</h3>
      <ul>
        <li>AWS account with credentials configured</li>
        <li>SST V3 installed globally: <code>npm install -g sst@latest</code></li>
        <li>Node.js 18 or higher</li>
      </ul>

      <h3>Deploy to AWS</h3>
      <div class="code-block">
        <pre><code># Install dependencies
npm install

# Deploy to production
npx sst deploy --stage production

# Output will show your Lambda Function URL:
# âœ“  Complete
#    UswdsMcpServer: https://abc123.lambda-url.us-east-1.on.aws</code></pre>
      </div>

      <h3>Configure API Key (Recommended)</h3>
      <p>Set an API key to secure your deployment:</p>
      <div class="code-block">
        <pre><code># Set API key via SST secrets
npx sst secret set API_KEY your-secret-key-here --stage production

# Redeploy to apply changes
npx sst deploy --stage production</code></pre>
      </div>

      <h3>Use Remote Server</h3>
      <p>Configure your MCP client to use the remote server via HTTP:</p>
      <div class="code-block">
        <pre><code>{
  "mcpServers": {
    "uswds-remote": {
      "url": "https://your-function-url.lambda-url.us-east-1.on.aws",
      "headers": {
        "Authorization": "Bearer your-secret-key-here"
      }
    }
  }
}</code></pre>
      </div>

      <h3>Rate Limits</h3>
      <p>The remote server includes rate limiting to prevent abuse:</p>
      <ul>
        <li><strong>Free tier:</strong> 100 requests/minute, 10,000 requests/day</li>
        <li><strong>Pro tier:</strong> 1,000 requests/minute, 1,000,000 requests/month</li>
        <li><strong>Enterprise:</strong> Custom limits and dedicated support</li>
      </ul>
      <p><a href="/pricing">View pricing details â†’</a></p>
    </section>

    <!-- Testing -->
    <section class="section">
      <h2>Test Your Installation</h2>
      <p>Once configured, test the MCP server in your client:</p>

      <h3>List Available Tools</h3>
      <p>In Claude Desktop, ask:</p>
      <blockquote>
        "What USWDS tools do you have available?"
      </blockquote>

      <h3>Try a Simple Query</h3>
      <p>Test a basic tool call:</p>
      <blockquote>
        "List all USWDS components in the forms category"
      </blockquote>

      <h3>Get Component Information</h3>
      <p>Request detailed component info:</p>
      <blockquote>
        "Show me how to use the USWDS Button component"
      </blockquote>
    </section>

    <!-- Troubleshooting -->
    <section class="section">
      <h2>Troubleshooting</h2>

      <h3>Server Not Starting</h3>
      <ul>
        <li>Verify Node.js version: <code>node --version</code> (should be 18+)</li>
        <li>Check build succeeded: <code>npm run build</code></li>
        <li>Verify path in config is absolute, not relative</li>
      </ul>

      <h3>Tools Not Appearing</h3>
      <ul>
        <li>Restart your MCP client after config changes</li>
        <li>Check client logs for connection errors</li>
        <li>Verify JSON syntax in configuration file</li>
      </ul>

      <h3>Lambda Deployment Issues</h3>
      <ul>
        <li>Verify AWS credentials: <code>aws sts get-caller-identity</code></li>
        <li>Check SST version: <code>sst version</code></li>
        <li>Review CloudWatch logs for errors</li>
      </ul>

      <h3>Rate Limit Errors (429)</h3>
      <ul>
        <li>Check current limits in response headers</li>
        <li>Wait for rate limit window to reset</li>
        <li>Consider upgrading to Pro tier for higher limits</li>
      </ul>
    </section>

    <!-- Next Steps -->
    <section class="section">
      <h2>Next Steps</h2>
      <div class="card-grid">
        <a href="/docs" class="card">
          <h3>ðŸ“– Documentation</h3>
          <p>Explore all 18 available tools and their usage</p>
        </a>
        <a href="https://github.com/ctrimm/uswds-local-mcp-server" class="card">
          <h3>ðŸ”§ GitHub Repository</h3>
          <p>View source code, report issues, contribute</p>
        </a>
        <a href="/pricing" class="card">
          <h3>ðŸ’° Pricing</h3>
          <p>Compare plans and upgrade for higher limits</p>
        </a>
      </div>
    </section>
  </div>
</Layout>

<style>
  .container {
    max-width: 900px;
    margin: 0 auto;
    padding: 3rem 2rem;
  }

  h1 {
    font-size: 2.5rem;
    color: var(--primary);
    margin-bottom: 0.5rem;
  }

  .lead {
    font-size: 1.25rem;
    color: #71767a;
    margin-bottom: 3rem;
  }

  .section {
    margin-bottom: 4rem;
  }

  h2 {
    font-size: 2rem;
    color: var(--primary);
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 3px solid var(--secondary);
  }

  h3 {
    font-size: 1.5rem;
    color: #1b1b1b;
    margin-top: 2rem;
    margin-bottom: 1rem;
  }

  h4 {
    font-size: 1.25rem;
    color: #1b1b1b;
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
  }

  ul, ol {
    margin-left: 1.5rem;
    margin-bottom: 1.5rem;
  }

  li {
    margin-bottom: 0.5rem;
    line-height: 1.6;
  }

  .code-block {
    background: #1b1b1b;
    color: #e8e8e8;
    padding: 1.5rem;
    border-radius: 8px;
    margin: 1rem 0 2rem;
    overflow-x: auto;
  }

  .code-block pre {
    margin: 0;
    font-family: 'Courier New', monospace;
    font-size: 0.9rem;
    line-height: 1.5;
  }

  code {
    background: #f0f0f0;
    padding: 0.2rem 0.4rem;
    border-radius: 4px;
    font-family: 'Courier New', monospace;
    font-size: 0.9em;
  }

  .code-block code {
    background: transparent;
    padding: 0;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    margin: 1.5rem 0;
  }

  th, td {
    text-align: left;
    padding: 0.75rem;
    border: 1px solid #ddd;
  }

  th {
    background: var(--primary);
    color: white;
    font-weight: 600;
  }

  tr:nth-child(even) {
    background: #f9f9f9;
  }

  blockquote {
    background: #f0f6fc;
    border-left: 4px solid var(--primary);
    padding: 1rem 1.5rem;
    margin: 1rem 0;
    font-style: italic;
    color: #1b1b1b;
  }

  .card-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
    margin-top: 2rem;
  }

  .card {
    background: white;
    border: 2px solid #ddd;
    border-radius: 8px;
    padding: 1.5rem;
    text-decoration: none;
    color: inherit;
    transition: all 0.2s;
  }

  .card:hover {
    border-color: var(--primary);
    box-shadow: 0 4px 12px rgba(0, 94, 162, 0.1);
    transform: translateY(-2px);
  }

  .card h3 {
    margin-top: 0;
    color: var(--primary);
  }

  .card p {
    margin: 0;
    color: #71767a;
  }

  @media (max-width: 768px) {
    .container {
      padding: 2rem 1rem;
    }

    h1 {
      font-size: 2rem;
    }

    h2 {
      font-size: 1.75rem;
    }

    .code-block {
      padding: 1rem;
    }
  }
</style>
